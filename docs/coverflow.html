<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title></title>
<style>
  /* Vollfläche + Scrollbars aus */
  html,body{margin:0;height:100vh;background:#071c46}
  html,body{overflow:hidden; -ms-overflow-style:none; scrollbar-width:none}
  body::-webkit-scrollbar{display:none}
  *{box-sizing:border-box}

  /* Bühne */
  .wrap{display:grid;place-items:center;height:100vh;padding:0}

  /* Responsive Postergröße:
     - 40vw (breit)
     - ODER 72vh in Höhe -> Breite = Höhe * 2/3
     - min/max Klammern verhindern zu klein/groß
  */
  :root{
    --card-ratio: 2/3;                             /* width / height   */
    --card-w: clamp(200px, min(40vw, calc(72vh * (2/3))), 420px);
    --gap: 24%;
    --angle: 16deg;
    --scale-step: .11;
  }

  .unipop-coverflow{
    position:relative; perspective:1000px;
    /* Höhe aus Breite & Ratio ableiten */
    width:100%;
    height: calc(var(--card-w) / (var(--card-ratio)));
    display:grid; place-items:center; overflow:visible; isolation:isolate;
    /* Platz für Dots, damit nix übersteht -> keine Scrollbar */
    padding-block-end: 28px;
  }

  .unipop-stage{position:relative;width:100%;height:100%}

  .unipop-item{
    position:absolute; left:50%; top:50%;
    transform:translate(-50%,-50%);
    width:var(--card-w); aspect-ratio:var(--card-ratio);
    border-radius:16px; overflow:hidden; background:#111;
    box-shadow:0 18px 40px rgba(0,0,0,.35);
    will-change:transform,filter;
    transition:transform .35s cubic-bezier(.22,.61,.36,1), z-index .35s ease, box-shadow .35s ease, filter .35s ease;
  }
  .unipop-item img{width:100%;height:100%;object-fit:cover;display:block}
  .unipop-item[aria-current="true"]{box-shadow:0 28px 64px rgba(0,0,0,.48);filter:none}
  .unipop-item[aria-current="false"]{filter:brightness(.88) saturate(.96)}

  .unipop-nav{
    position:absolute; inset-inline:0; top:50%;
    display:flex; justify-content:space-between; transform:translateY(-50%);
    pointer-events:none;
  }
  .unipop-btn{
    pointer-events:auto; width:46px; height:46px; border-radius:999px; border:none; cursor:pointer;
    background:rgba(0,0,0,.55); color:#fff; font-size:22px; display:grid; place-items:center
  }

  .unipop-dots{
    position:absolute; bottom:6px; left:50%;
    transform:translateX(-50%); display:flex; gap:.45rem
  }
  .unipop-dot{width:9px; height:9px; border-radius:50%; border:none; cursor:pointer; background:rgba(255,255,255,.5)}
  .unipop-dot[aria-current="true"]{background:#fff}

  @media (max-width:520px){
    :root{ --gap:28%; --angle:14deg; --scale-step:.13; }
  }
</style>
</head>
<body>

<div class="wrap">
  <div class="unipop-coverflow" data-autoplay="1200" data-loop="true" data-ratio="2/3" aria-label="UniPop Galerie">
    <div class="unipop-item"><img src="https://www.unipop.lu/wp-content/uploads/2025/10/Gin1.jpg" alt=""></div>
    <div class="unipop-item"><img src="https://www.unipop.lu/wp-content/uploads/2025/10/Gin3.jpg" alt=""></div>
    <div class="unipop-item"><img src="https://www.unipop.lu/wp-content/uploads/2025/10/Gin5.jpg" alt=""></div>
    <div class="unipop-item"><img src="https://www.unipop.lu/wp-content/uploads/2025/10/Gin4.jpg" alt=""></div>
    <div class="unipop-item"><img src="https://www.unipop.lu/wp-content/uploads/2025/10/Gin2.jpg" alt=""></div>
  </div>
</div>

<script>
(()=>{const $$=(s,c=document)=>Array.from(c.querySelectorAll(s));const clamp=(n,min,max)=>Math.max(min,Math.min(n,max));
function init(root){
  if(root.__inited) return; root.__inited=true;
  const NORMAL=1200, HOVER=700;
  const loop=root.dataset.loop==="true";
  const ratio=root.dataset.ratio||""; if(ratio) root.style.setProperty("--card-ratio",ratio);
  const items=$$(".unipop-item",root); if(!items.length) return;

  const stage=document.createElement("div"); stage.className="unipop-stage";
  while(root.firstChild) stage.appendChild(root.firstChild); root.appendChild(stage);

  const nav=document.createElement("div"); nav.className="unipop-nav";
  const prevBtn=document.createElement("button"); prevBtn.className="unipop-btn"; prevBtn.innerHTML="‹";
  const nextBtn=document.createElement("button"); nextBtn.className="unipop-btn"; nextBtn.innerHTML="›";
  nav.append(prevBtn,nextBtn); root.appendChild(nav);

  const dots=document.createElement("div"); dots.className="unipop-dots";
  items.forEach((_,i)=>{const d=document.createElement("button"); d.className="unipop-dot"; dots.appendChild(d);});
  root.appendChild(dots);

  let index=0, timer=null, hoverTimer=null;

  function render(){
    const cs=getComputedStyle(root);
    const gap=parseFloat(cs.getPropertyValue('--gap'))||24;
    const ang=parseFloat(cs.getPropertyValue('--angle'))||16;
    const step=parseFloat(cs.getPropertyValue('--scale-step'))||.11;
    items.forEach((el,i)=>{
      const off=i-index, dir=Math.sign(off), abs=Math.abs(off);
      const x=off*gap, sc=1-(abs*step), rot=dir*ang;
      el.style.zIndex=String(100-abs);
      el.style.transform=`translate(-50%,-50%) translateX(${x}%) rotateY(${rot}deg) scale(${sc})`;
      el.setAttribute('aria-current', abs===0 ? 'true' : 'false');
    });
    $$(".unipop-dot",root).forEach((d,i)=> d.setAttribute("aria-current", String(i===index)));
  }
  function go(i){ index = loop ? (i+items.length)%items.length : clamp(i,0,items.length-1); render(); }
  const next=()=>go(index+1), prev=()=>go(index-1);

  function start(){ stop(); timer=setInterval(next,NORMAL); }
  function stop(){ if(timer){clearInterval(timer);timer=null;} }
  function startHover(){ stopHover(); hoverTimer=setInterval(next,HOVER); }
  function stopHover(){ if(hoverTimer){clearInterval(hoverTimer);hoverTimer=null;} }

  nextBtn.onclick=()=>{next();start();};
  prevBtn.onclick=()=>{prev();start();};
  $$(".unipop-dot",root).forEach((d,i)=> d.onclick=()=>{go(i);start();});

  root.onmouseover=()=>{stop();startHover();};
  root.onmouseout =()=>{stopHover();start();};

  let sx=0, drag=false;
  stage.onpointerdown=e=>{drag=true;sx=e.clientX;stop();stopHover();};
  stage.onpointerup  =e=>{if(!drag)return;const dx=e.clientX-sx;drag=false;if(dx<-40)next();else if(dx>40)prev();start();};
  stage.onpointercancel=()=>drag=false;

  go(0); start();
}
document.addEventListener("DOMContentLoaded",()=> $$(".unipop-coverflow").forEach(init));
})();
</script>

</body>
</html>
